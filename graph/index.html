
<!DOCTYPE html>
<html>
<head>
	<title>Leaflet Quick Start Guide Example</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
</head>
<body>
<form>
    <input type="radio" name="mode" value="WALK" checked> Walk
    <br>
    <input type="radio" name="mode" value="WALK,TRANSIT"> Public Transit
</form>
	<div id="mapid" style="width: 800px; height: 600px"></div>

	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
	<script>

var myStyle = {
    "color": "#ff7800",
    "weight": 1,
    "opacity": 0.65
};
		var mymap = L.map('mapid').setView([33.75, -84.4], 12);

		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
			maxZoom: 18,
			attribution: '',
			id: 'mapbox.streets'
		}).addTo(mymap);


		var routesLayer = L.geoJson('',{style: myStyle,clickable:false}).addTo(mymap);
		$.ajax({
			dataType: "json",
		  	url: '/routes.geojson',
		  	success: function(data){
				routesLayer.addData(data);
		  	}
		});

		var walkLayer = L.geoJson('',{clickable:false}).addTo(mymap);
		function onMapClick(e) {
			var mode= document.querySelector('input[name="mode"]:checked').value;
			walkLayer.clearLayers();	

			$.ajax({
			  url: 'http://localhost:8080/otp/routers/default/isochrone?algorithm=accSampling&fromPlace='+e.latlng.lat.toString()
				  +','+
				  e.latlng.lng.toString()
				  +'&toPlace=33.2,-84&mode='+
				  mode
				  +'&cutoffSec=1800&optimize=QUICK&callback=?',
			  success: function(data){
				walkLayer.addData(data);
			  }
			});
		}
		mymap.on('click', onMapClick);


	</script>
</body>
</html>
